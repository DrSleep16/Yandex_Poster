# Куда пойти — Москва глазами Артёма

Веб-приложение для отображения интересных мест Москвы на карте с подробным описанием, фотографиями и удобной админкой.

## Возможности

- Карта на Leaflet с кастомными маркерами
- Фронтенд на Vue.js (встраивается через шаблон)
- Все данные о местах и фотографиях берутся из базы данных Django
- Drag-and-drop сортировка фотографий в админке (django-admin-sortable2)
- Загрузка и предпросмотр изображений в админке
- WYSIWYG-редактор для описаний (django-tinymce)
- Все чувствительные настройки вынесены в переменные окружения

## Быстрый старт

### 1. Клонируй репозиторий

```bash
git clone <адрес_репозитория>
cd <папка_проекта>
```

### 2. Установи зависимости

```bash
pip install -r requirements.txt
```

### 3. Создай файл `.env` в корне проекта

Пример содержимого:
```
SECRET_KEY=your-secret-key
DEBUG=True
ALLOWED_HOSTS=127.0.0.1,localhost
DB_NAME=db.sqlite3
```

### 4. Применить миграции

```bash
python manage.py migrate
```

### 5. Создай суперпользователя

```bash
python manage.py createsuperuser
```

### 6. Запусти сервер

```bash
python manage.py runserver
```

### 7. Зайди в админку

- http://127.0.0.1:8000/admin/
- Добавь места, фотографии, описания.

### 8. Открой главную страницу

- http://127.0.0.1:8000/
- Проверь, что метки отображаются на карте, описания и фото загружаются.

## Структура проекта

- `places/` — Django-приложение с моделями мест и фотографий
- `templates/index.html` — основной шаблон с картой и Vue.js
- `static/` — статические файлы (js, css, картинки)
- `media/` — загруженные изображения (создаётся автоматически)
- `requirements.txt` — зависимости проекта

## Используемые технологии

- Django
- Leaflet.js
- Vue.js
- django-admin-sortable2
- django-tinymce
- environs

## Переменные окружения

- `SECRET_KEY` — секретный ключ Django
- `DEBUG` — режим отладки
- `ALLOWED_HOSTS` — список разрешённых хостов
- `DB_NAME` — имя файла базы данных
- `DB_USER`, `DB_PASSWORD`, `DB_HOST`, `DB_PORT` — для PostgreSQL


## Пример JSON-файла для загрузки локации

```json
{
  "title": "Многофункциональный технологичный лофт TelePort360°",
  "imgs": [],
  "description_short": "Современное пространство для мероприятий.",
  "description_long": "<p>TelePort360° — это уникальный лофт с панорамным видом на Москву, подходящий для проведения различных событий: от деловых встреч до вечеринок.</p>",
  "coordinates": {
    "lng": 37.611739,
    "lat": 55.793205
  }
}
```

## Как пользоваться management-командой для загрузки локаций

Чтобы быстро добавить новые места и фотографии на сайт, используй специальную management-команду Django.

### 1. Скачай или подготовь ссылку на JSON-файл с описанием локации

### 2. Запусти команду в терминале

```bash
python manage.py load_place <ссылка_на_json_или_путь_к_файлу>
